CREATE DATABASE IF NOT EXISTS krautundrueben3;
USE krautundrueben3;

CREATE TABLE IF NOT EXISTS besch_allerg (
  ID int(11) NOT NULL AUTO_INCREMENT,
  Bezeichnung varchar(50) DEFAULT NULL,
  PRIMARY KEY (ID))
  ;

CREATE TABLE IF NOT EXISTS lieferant (
  LIEFERANTENNR int(11) NOT NULL,
  LIEFERANTENNAME varchar(50) DEFAULT NULL,
  STRASSE varchar(50) DEFAULT NULL,
  HAUSNR varchar(6) DEFAULT NULL,
  PLZ varchar(5) DEFAULT NULL,
  ORT varchar(50) DEFAULT NULL,
  TELEFON varchar(25) DEFAULT NULL,
  EMAIL varchar(50) DEFAULT NULL,
  PRIMARY KEY (LIEFERANTENNR));

CREATE TABLE IF NOT EXISTS zutat (
  ID int(11) NOT NULL,
  BEZEICHNUNG varchar(50) DEFAULT NULL,
  EINHEIT varchar(25) DEFAULT NULL,
  NETTOPREIS decimal(10,2) DEFAULT NULL,
  BESTAND int(11) DEFAULT NULL,
  LIEFERANTENNR int(11),
  KALORIEN int(11) DEFAULT NULL,
  KOHLENHYDRATE decimal(10,2) DEFAULT NULL,
  PROTEIN decimal(10,2) DEFAULT NULL,
  besch_allerg_ID int(11) DEFAULT 1,
  PRIMARY KEY (ID),
  KEY LIEFERANTENNR (LIEFERANTENNR),
  KEY besch_allerg_ID (besch_allerg_ID))
  ;

CREATE TABLE IF NOT EXISTS kunde (
  KUNDENNR int(11) NOT NULL,
  NACHNAME varchar(50) DEFAULT NULL,
  VORNAME varchar(50) DEFAULT NULL,
  GEBURTSDATUM date DEFAULT NULL,
  STRASSE varchar(50) DEFAULT NULL,
  HAUSNR varchar(6) DEFAULT NULL,
  PLZ varchar(5) DEFAULT NULL,
  ORT varchar(50) DEFAULT NULL,
  TELEFON varchar(25) DEFAULT NULL,
  EMAIL varchar(50) DEFAULT NULL,
  PRIMARY KEY (KUNDENNR))
  ;
  
 CREATE TABLE IF NOT EXISTS bestellung (
  BESTELLNR int(11) NOT NULL AUTO_INCREMENT,
  KUNDENNR int(11) DEFAULT NULL,
  BESTELLDATUM date DEFAULT NULL,
  RECHNUNGSBETRAG decimal(10,2) DEFAULT NULL,
  PRIMARY KEY (BESTELLNR),
  KEY KUNDENNR (KUNDENNR))
  ;

CREATE TABLE IF NOT EXISTS bestellungzutat (
  BESTELLNR int(11) NOT NULL,
  zutat_ID int(11) NOT NULL,
  MENGE int(11) DEFAULT NULL,
   KEY BESTELLNR (BESTELLNR),
   KEY zutat_ID (zutat_ID))
  ;

CREATE TABLE IF NOT EXISTS ek (
  ID int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) DEFAULT NULL,
  PRIMARY KEY (ID))
  ;

CREATE TABLE IF NOT EXISTS rezept (
  ID int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) NOT NULL DEFAULT '0',
  beschreibung varchar(280) NOT NULL DEFAULT '0',
  zubereitungsdauer_min int(11) DEFAULT NULL,
  Gesamtkalorien int(11) DEFAULT NULL,
  PRIMARY KEY (ID))
  ;

CREATE TABLE IF NOT EXISTS rezeptek (
  rezept_ID int(11) DEFAULT NULL,
  ek_ID int(11) DEFAULT NULL,
  KEY rezept_ID (rezept_ID),
  KEY ek_ID (ek_ID))
  ;
  
CREATE TABLE IF NOT EXISTS zutatrezept (
  rezept_ID int(11) DEFAULT NULL,
  zutat_ID int(11) DEFAULT NULL,
  menge varchar(50) DEFAULT NULL,
  KEY zutat_ID (zutat_ID),
  KEY rezept_ID (rezept_ID))
  ; 